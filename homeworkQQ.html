<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>模拟QQ作业</title>
    <style>
        #showMsg {
            width: 300px;
            height: 500px;
            border: 1px solid black;
            overflow: auto;
        }
    </style>
</head>

<body>
    <div id="userBox">
        姓名：
        <input type="text" id="userIpt">
        <input type="button" id="btnUser" value="确认">
    </div>
    <div id="showMsg">
        <dl>
            <dt></dt>
            <dd></dd>
        </dl>
    </div>
    <div id="msgBox">
        <input type="text" id="msgIpt">
        <input type="button" id="btnMsg" value="发送">
    </div>

    <script>
        onload = function () {
            userIpt.focus();
        }
        var user = "", msg = "";
        userIpt.onkeydown = function (e) {
            if (e.which == 13 && !e.altKey && !e.shiftKey) {
                if (userIpt.value == "") {
                    alert("名字不能为空");
                }
                else {
                    user = userIpt.value;
                    userBox.style.display = "none";
                    showMsg.innerHTML = "";
                    msgIpt.focus();
                }
            }
        }

        btnUser.onclick = function () {
            if (userIpt.value == "") {
                alert("名字不能为空");
            }
            else {
                user = userIpt.value;
                userBox.style.display = "none";
                showMsg.innerHTML = "";
                msgIpt.focus();
            }
        }

        btnMsg.onclick = function () {
            if (user == "") {
                showMsg.innerHTML = "你还没输入名字";
            }
            else if (msgIpt.value != "") {
                var odl = document.createElement('dl');
                msg = msgIpt.value;
                odl.innerHTML = "<dt>" + user + "</dt>" + "<dd>" + msg + "</dd>";
                showMsg.appendChild(odl);
                msgIpt.value = "";
                showMsg.scrollTop = showMsg.scrollHeight;
                msgIpt.focus();
            }
        }

        msgIpt.onkeydown = function (e) {
            if (msgIpt.value != "" && e.which == 13 && !e.altKey && !e.shiftKey) {
                if (user == "") {
                    showMsg.innerHTML = "你还没输入名字";
                }
                else {
                    var odl = document.createElement('dl');
                    msg = msgIpt.value;
                    odl.innerHTML = "<dt>" + user + "</dt>" + "<dd>" + msg + "</dd>";
                    showMsg.appendChild(odl);
                    msgIpt.value = "";
                    showMsg.scrollTop = showMsg.scrollHeight;
                }
            }
        }
/*        msgIpt.onkeydown = function (e) {
                            if (user == "") {
                                showMsg.innerHTML = "你还没输入名字";
                            }
                            else if (msgIpt.value != "" && e.which == 13 && !e.altKey && !e.shiftKey) {
                                var odl = document.createElement('dl');
                                msg = msgIpt.value;
                                odl.innerHTML = "<dt>" + user + "</dt>" + "<dd>" + msg + "</dd>";
                                showMsg.appendChild(odl);
                                msgIpt.value = "";
                                showMsg.scrollTop = showMsg.scrollHeight;
                            }
                        }*/

//强制将焦点放在输入框
        /*        onclick = function () {
                    if (user == "") {
                        userIpt.focus();
                    }
                    else{
                        msgIpt.focus();
                    }
                }*/
    </script>
</body>

</html>